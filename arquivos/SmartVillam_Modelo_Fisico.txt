/* Lógico_1: */

CREATE TABLE Usuario (
    Email varchar(100),
    Senha varchar(100),
    telefone varchar(11),
    Nome varchar(80),
    cod_usuário int PRIMARY KEY
);

CREATE TABLE Cultura (
    Cod_Plant int PRIMARY KEY,
    Nome varchar(100),
    FK_Periodo_de_colheita_Periodo_de_colheita_PK date,
    Media_agua_diaria int
);

CREATE TABLE Solo (
    Cod_Solo int PRIMARY KEY,
    Nome varchar(100),
    Media_agua_diaria int
);

CREATE TABLE Área (
    Numero_Area serial PRIMARY KEY,
    Tamanho int,
    Data_plantacao date,
    FK_Data_fertilizacao_Data_fertilizacao_PK date,
    FK_Solo_Cod_Solo int,
    FK_Cultura_Cod_Plant int
);

CREATE TABLE nutrientes (
    Cod_nutri int PRIMARY KEY,
    nome varchar(100)
);

CREATE TABLE Periodo_de_colheita (
    Periodo_de_colheita_PK date NOT NULL PRIMARY KEY,
    Periodo_de_colheita date
);

CREATE TABLE Data_fertilizacao (
    Data_fertilizacao_PK date NOT NULL PRIMARY KEY,
    Data_fertilizacao date
);

CREATE TABLE Registro (
    FK_Área_Numero_Area serial,
    FK_Usuario_cod_usuário int
);

CREATE TABLE possui (
    FK_Solo_Cod_Solo int,
    FK_nutrientes_Cod_nutri int,
    quantidade_kg_por_ha int
);

CREATE TABLE necessita (
    FK_Cultura_Cod_Plant int,
    FK_nutrientes_Cod_nutri int,
    quantidade_kg_por_ha int
);
 
ALTER TABLE Cultura ADD CONSTRAINT FK_Cultura_1
    FOREIGN KEY (FK_Periodo_de_colheita_Periodo_de_colheita_PK)
    REFERENCES Periodo_de_colheita (Periodo_de_colheita_PK)
    ON DELETE NO ACTION ON UPDATE NO ACTION;
 
ALTER TABLE Área ADD CONSTRAINT FK_Área_1
    FOREIGN KEY (FK_Data_fertilizacao_Data_fertilizacao_PK)
    REFERENCES Data_fertilizacao (Data_fertilizacao_PK)
    ON DELETE NO ACTION ON UPDATE NO ACTION;
 
ALTER TABLE Área ADD CONSTRAINT FK_Área_2
    FOREIGN KEY (FK_Solo_Cod_Solo)
    REFERENCES Solo (Cod_Solo)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE Área ADD CONSTRAINT FK_Área_3
    FOREIGN KEY (FK_Cultura_Cod_Plant)
    REFERENCES Cultura (Cod_Plant)
    ON DELETE SET NULL ON UPDATE CASCADE;
 
ALTER TABLE Registro ADD CONSTRAINT FK_Registro_0
    FOREIGN KEY (FK_Área_Numero_Area)
    REFERENCES Área (Numero_Area)
    ON DELETE SET NULL ON UPDATE CASCADE;
 
ALTER TABLE Registro ADD CONSTRAINT FK_Registro_1
    FOREIGN KEY (FK_Usuario_cod_usuário)
    REFERENCES Usuario (cod_usuário)
    ON DELETE SET NULL ON UPDATE CASCADE;
 
ALTER TABLE possui ADD CONSTRAINT FK_possui_0
    FOREIGN KEY (FK_Solo_Cod_Solo)
    REFERENCES Solo (Cod_Solo)
    ON DELETE SET NULL ON UPDATE CASCADE;
 
ALTER TABLE possui ADD CONSTRAINT FK_possui_1
    FOREIGN KEY (FK_nutrientes_Cod_nutri)
    REFERENCES nutrientes (Cod_nutri)
    ON DELETE SET NULL ON UPDATE CASCADE;
 
ALTER TABLE necessita ADD CONSTRAINT FK_necessita_0
    FOREIGN KEY (FK_Cultura_Cod_Plant)
    REFERENCES Cultura (Cod_Plant)
    ON DELETE SET NULL ON UPDATE CASCADE;
 
ALTER TABLE necessita ADD CONSTRAINT FK_necessita_1
    FOREIGN KEY (FK_nutrientes_Cod_nutri)
    REFERENCES nutrientes (Cod_nutri)
    ON DELETE SET NULL ON UPDATE CASCADE;